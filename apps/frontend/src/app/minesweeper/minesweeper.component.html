<div class="d-flex justify-content-end">
  <p-selectButton
    [options]="difficultyOptions"
    [(ngModel)]="selectedDifficulty"
    (onChange)="difficultyChange()"
    styleClass="mt-2"
  >
    <ng-template let-item> {{item | titlecase}} </ng-template>
  </p-selectButton>
</div>

<div class="main-double-board">
  <ng-container *ngTemplateOutlet="matrixTemplate; context:{matrix:userMatrix}"></ng-container>
</div>

<ng-template #matrixTemplate let-matrix="matrix">
  <div class="matrix-wrapper pb-2">
    <div
      class="matrix-container"
      [style.grid-template-columns]="'repeat(' + currentConfig.size + ',calc(min(700px, 100%) / ' + currentConfig.size +'))'"
    >
      <ng-container *ngFor="let row of matrix">
        <div *ngFor="let cell of row" class="matrix-col">
          <img *ngIf="cell.bomb" src="/assets/bomb.png" class="bomb-image" />
          <ng-container *ngTemplateOutlet="cellNumber; context: {cell}"></ng-container>
        </div>
      </ng-container>
    </div>
  </div>
</ng-template>

<ng-template #cellNumber let-cell="cell">
  <p
    *ngIf="!cell.bomb && cell.revealed"
    class="m-0 p-0 near-bombs-{{cell.nearBombs}}"
    style="font-size: 13px; font-weight: bolder;"
  >
    {{ cell.nearBombs }}
  </p>
</ng-template>
